{%extends 'ConfessionsApp/base.html'%}

{%load static%}
{%block custom_js%} 
  <script type="text/javascript" src="{%static 'js/confess.js'%}"></script>
{%endblock custom_js%}

{%block content%}
<div class="container">
  <form method="POST">
    {%csrf_token%}
    <div class=" mt-5 mb-3 text-center">
      <h4 for="ConfessionInput" class="form-label mb-2">Speak your truth</h4>
      {%if user.is_authenticated%}
      <textarea class="form-control" name="ConfessionInput" rows="4" placeholder="Type your confession..."></textarea>
      <input class="btn btn-outline-success mt-3 mb-5" id="confess-btn" type="submit" value="Confess"/>
      {%else%}
      <textarea class="form-control" name="ConfessionInput" rows="4" placeholder="Please log in or sign up!" disabled></textarea>
      <input class="btn btn-outline-success mt-3 mb-5" id="confess-btn" type="submit" value="Confess" disabled/>
      {%endif%}
    </div>
  </form>
  
  <div class="container mb-5">
  {%for Confession in Confessions%}
    <div class="card mt-2 mb-2">
      <span class="card-body">{{Confession.body}}</span>
      <div class="card-footer py-1 submission-footer text-muted">
        <span class="card-text">
          {{Confession.date}}
          {%if Confession.num_days_ago != 1%}
            ({{Confession.num_days_ago}} days ago)
          {%else%}
          ({{Confession.num_days_ago}} day ago)
          {%endif%}
        </span>
      </div>
    </div>
    
  {%endfor%}
  </div>
</div>

{%endblock content%}